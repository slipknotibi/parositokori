<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lilien – Környezetismeret kvíz – 2. forduló</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Lilien – Környezetismeret kvíz – 2. forduló</h1>
<div id="timer">20:00</div>

<div id="quizBox"></div>

<button id="startBtn" onclick="startQuiz()">Kezdés</button>

<div id="resultBox"></div>

<button id="showAnswersBtn" style="display:none;">Válaszok megtekintése</button>
<div id="answersList" style="display:none;"></div>

<div id="stopScreen">
    STOP
    <button id="continueBtn">Folytatás</button>
</div>

<script>
let questions = [
    {question:"Melyik életjelenséghez tartozik a hidegre vagy melegre adott reakció?",answers:["Érzékelés","Szaporodás","Légzés"],correct:0},
    {question:"Mi biztosít energiát a mozgáshoz?",answers:["Légzés","Táplálkozás","Fény"],correct:1},
    {question:"Melyik NEM életfeltétel?",answers:["Levegő","Táplálék","Hang"],correct:2},
    {question:"Mi történik levegő nélkül?",answers:["Gyorsabban nő","Nem tud élni","Színt vált"],correct:1},
    {question:"Mi jellemző a fejlődésre?",answers:["Kisebb lesz","Változik és ügyesedik","Nem változik"],correct:1},
    {question:"Miért fontos a megfelelő hőmérséklet?",answers:["Mozgáshoz kell","Életben maradáshoz kell","Színt ad"],correct:1},

    {question:"Melyik növény örökzöld?",answers:["Tölgy","Lucfenyő","Bükk"],correct:1},
    {question:"A lombhullató fák levelei ősszel:",answers:["Megvastagodnak","Lehullanak","Eltűnnek"],correct:1},
    {question:"A gyökér feladata NEM ez:",answers:["Rögzítés","Vízfelszívás","Magkészítés"],correct:2},
    {question:"A szár feladata:",answers:["Levelek tartása","Talaj lazítása","Magok elrejtése"],correct:0},
    {question:"A virágból mi fejlődik?",answers:["Gyökér","Termés","Levél"],correct:1},
    {question:"A lágyszárú növény szára:",answers:["Kemény","Puha és hajlékony","Tűlevelű"],correct:1},
    {question:"A fák és bokrok fő különbsége:",answers:["Mag színe","Magasság","Gyökér hossza"],correct:1},
    {question:"Miért fordulnak a növények a fény felé?",answers:["Meleg miatt","Táplálékkészítéshez","Több víz miatt"],correct:1},

    {question:"Mi borítja az emlősök testét?",answers:["Toll","Szőr","Pikkely"],correct:1},
    {question:"Az emlősök hogyan lélegeznek?",answers:["Tüdővel","Kopoltyúval","Bőrrel"],correct:0},
    {question:"Melyik állat háziasított?",answers:["Juh","Róka","Hiúz"],correct:0},
    {question:"A vadon élő állatok:",answers:["Az ember eteti őket","Maguk keresnek táplálékot","Házban élnek"],correct:1},
    {question:"A vízi emlősök miért jönnek a felszínre?",answers:["Napozni","Levegőt venni","Táplálkozni"],correct:1},
    {question:"Melyik állat növényevő?",answers:["Nyúl","Róka","Vidra"],correct:0},
    {question:"Melyik állat ragadozó?",answers:["Ló","Hiúz","Kecske"],correct:1},
    {question:"Melyik állat mindenevő?",answers:["Vaddisznó","Csuka","Harcsa"],correct:0},
    {question:"Mi kell a házi kedvencek tartásához?",answers:["Csak étel","Csak ketrec","Felelősség és gondoskodás"],correct:2},
    {question:"A vadon élő állatok hol élnek?",answers:["Természetes élőhelyen","Istállóban","Házban"],correct:0},

    {question:"Mi borítja a madarak testét?",answers:["Szőr","Toll","Pikkely"],correct:1},
    {question:"A madarak mivel szaporodnak?",answers:["Ikrákkal","Tojásokkal","Élve"],correct:1},
    {question:"A ragadozó madarak csőre:",answers:["Kúpos","Kampós","Lapos"],correct:1},
    {question:"A vízi madarak lába:",answers:["Úszóláb","Kapirgálóláb","Kapaszkodóláb"],correct:0},
    {question:"A fészeklakó fiókák:",answers:["Csupaszon kelnek ki","Azonnal önállóak","Nem igényelnek gondozást"],correct:0},
    {question:"A fészekhagyó fiókák:",answers:["Talajon fészkelnek","Vakok","Mozgásképtelenek"],correct:0},
    {question:"A vándormadarak miért repülnek el?",answers:["Több táplálék miatt","Unatkoznak","Több víz miatt"],correct:0},
    {question:"A madarak mivel lélegeznek?",answers:["Kopoltyúval","Tüdővel","Bőrrel"],correct:1},

    {question:"Mi borítja a halak testét?",answers:["Toll","Nyálkás bőr és pikkely","Szőr"],correct:1},
    {question:"A halak mivel lélegeznek?",answers:["Tüdővel","Kopoltyúval","Bőrrel"],correct:1},
    {question:"A halaknak van-e nyakuk?",answers:["Igen","Nincs","Csak a ragadozóknak"],correct:1},
    {question:"Mi segíti a halakat az emelkedésben?",answers:["Úszóhólyag","Farokúszó","Kopoltyúfedő"],correct:0},
    {question:"Melyik hal növényevő?",answers:["Amur","Csuka","Harcsa"],correct:0},
    {question:"Melyik hal ragadozó?",answers:["Ponty","Csuka","Ezüstkárász"],correct:1},
    {question:"Melyik hal mindenevő?",answers:["Ponty","Csuka","Harcsa"],correct:0},
    {question:"A halak hogyan szaporodnak?",answers:["Ikrákkal","Élve","Tojással"],correct:0},

    {question:"Mi veszélyezteti az élőhelyeket?",answers:["Szennyezés és erdőirtás","Túl sok eső","Túl sok madár"],correct:0},
    {question:"Hol óvják a veszélyeztetett fajokat?",answers:["Áruházakban","Nemzeti parkokban","Iskolákban"],correct:1},
    {question:"Mit jelent az, hogy egy állat vadon él?",answers:["Az ember gondoskodik róla","Természetes környezetben él","Állatkertben él"],correct:1},
    {question:"Mit jelent a mondat: „Csak a lábnyomod hagyd az erdőben”?",answers:["Ne hagyj szemetet","Mindig fuss az erdőben","Ne menj az erdőbe"],correct:0}
];

let current = 0;
let score = 0;
let timeLeft = 1200;
let timer;
let userAnswers = [];

function formatTime(sec) {
    let m = Math.floor(sec / 60);
    let s = sec % 60;
    return `${m}:${s < 10 ? "0" + s : s}`;
}

function startQuiz() {
    document.getElementById("startBtn").style.display = "none";
    document.getElementById("stopScreen").style.display = "none";
    document.getElementById("timer").innerText = formatTime(timeLeft);
    showQuestion();
    startTimer();
}

function startTimer() {
    timer = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = formatTime(timeLeft);

        if (timeLeft <= 0) {
            clearInterval(timer);
            showStopScreen();
        }
    }, 1000);
}

function showQuestion() {
    let q = questions[current];
    let html = `<div class='question'><h3>${q.question}</h3>`;

    q.answers.forEach((ans, i) => {
        html += `<button onclick="answer(${i})">${ans}</button>`;
    });

    html += "</div>";
    document.getElementById("quizBox").innerHTML = html;
}

function answer(i) {
    userAnswers[current] = i;

    if (i === questions[current].correct) score++;

    current++;

    if (current < questions.length) {
        showQuestion();
    } else {
        endQuiz();
    }
}

function endQuiz() {
    clearInterval(timer);
    document.getElementById("quizBox").innerHTML = "";

    let percent = Math.round((score / questions.length) * 100);
    let grade = 1;
    if (percent >= 90) grade = 5;
    else if (percent >= 75) grade = 4;
    else if (percent >= 60) grade = 3;
    else if (percent >= 45) grade = 2;

    document.getElementById("resultBox").innerHTML =
        `<h2>Eredmény: ${score} / ${questions.length} (${percent}%)<br>Érdemjegy: ${grade}</h2>`;

    document.getElementById("showAnswersBtn").style.display = "block";
}

function showStopScreen() {
    document.getElementById("quizBox").innerHTML = "";
    document.getElementById("stopScreen").style.display = "flex";
    clearInterval(timer);
}

document.getElementById("continueBtn").addEventListener("click", function () {
    document.getElementById("stopScreen").style.display = "none";
    timeLeft = 1200;
    document.getElementById("timer").innerText = formatTime(timeLeft);
    startTimer();
    showQuestion();
});

document.getElementById("showAnswersBtn").addEventListener("click", function () {
    let html = "<h2>Helyes válaszok</h2>";

    questions.forEach((q, i) => {
        html += `
            <div style="margin-bottom:20px; padding:10px; border:1px solid #ccc; border-radius:8px;">
                <strong>${i+1}. kérdés:</strong> ${q.question}<br>
                <span style="color:green;"><strong>Helyes válasz:</strong> ${q.answers[q.correct]}</span><br>
                <span style="color:blue;"><strong>A te válaszod:</strong> ${userAnswers[i] !== undefined ? q.answers[userAnswers[i]] : "—"}</span>
            </div>
        `;
    });

    document.getElementById("answersList").innerHTML = html;
    document.getElementById("answersList").style.display = "block";
});
</script>

</body>
</html>
